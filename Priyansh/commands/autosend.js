const axios = require("axios");
const moment = require("moment-timezone");

const shayariList = [
  "à¤¤à¥‡à¤°à¥€ à¤¹à¤‚à¤¸à¥€ à¤¸à¥‡ à¤¹à¤° à¤¦à¤¿à¤¨ à¤•à¥€ à¤¶à¥à¤°à¥à¤†à¤¤ à¤¹à¥‹, à¤¨à¤¯à¤¾ à¤¸à¤¾à¤² à¤¬à¤¸ à¤¤à¥à¤à¤¸à¥‡ à¤–à¤¾à¤¸ à¤¹à¥‹à¥¤",
    "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ”ğƒğšğšğ’ ğ‡ğ® ğğšğ‘ ğ“ğ®ğ‰ğ¡ğ’ğ ğğšğ‘ğšğ™ ğğšğ‡ğ¢ ğ“ğğ‘ğ ğğšğ’ğ¬ ğğšğ‡ğ¢ ğ‰ğ¡ğ¨ğ¨ğ“ ğŠğšğ‡ğ® ğ“ğ¨ ğ¬ğ ğŠğ®ğœğ‡ ğ‡ ğŒğğ‘ğ ğğšğ’ğ’ ğğ« ğ’ğšğœğ‡ ğŠğšğ‡ğš ğ“ğ¨ ğ“ğğ‘ğ ğ’ğ¢ğ–ğš ğŠğ®ğ‚ğ¡ ğŠğ‡ğšğšğ’ ğğšğ‡ğ¢ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ–ğ¨ğ‡ ğŠğ¡ğ®ğ’ğ¡ ğ‡ğ€ğ¢ ğğšğ‘ ğ’ğ¡ğšğ˜ğšğ ğ‡ğ®ğŒ ğ’ğ ğğšğ‡ğ¢ ğ–ğ¨ğ‡ ğğšğ‘ğšğ‰ ğ‡ğšğ¢ ğğšğ‘ ğ’ğ¡ğšğ˜ğšğ ğ‡ğ®ğŒ ğ’ğ ğğšğ‡ğ¢ ğŠğ¨ğ ğŠğğ‡ğšğ“ğš ğ‡ğšğ¢ ğŠğ ğ”ğ§ğŠğ ğƒğ¢ğ¥ğ¥ ğŒğ ğŒğ¨ğ‡ğ¨ğğšğšğ“ ğğšğ‡ğ¢ ğŒğ¨ğ‡ğ¨ğğšğšğ“ ğ‡ğšğ¢ ğğšğ‘ ğ’ğ¡ğšğ˜ğšğ ğ‡ğ®ğŒ ğ’ğ ğğšğ¡ğ¢  ï¼¿ã€‘  â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğŒğ®ğ£ğ¡ğŠğ¨ ğ€ğ¢ğ’ğš ğƒğšğ«ğƒ ğŒğ¢ğ‹ğš ğ‰ğ¢ğ¬ğŠğ¢ ğƒğšğ–ğ€ ğğšğ‡ğ¢ ğğšğ¢ğ‘ ğğ¡ğ¢ ğŠğ¡ğ®ğ’ğ¡ ğ‡ğ®ğ ğŒğ®ğ£ğ‡ğ ğ”ğ¬ ğ’ğ ğŠğ¨ğˆ ğ†ğ¢ğ¥ğ€ ğğšğ‡ğ¢ ğ€ğ®ğ‘ ğŠğ¢ğ“ğ§ğ„ ğ€ğšğ§ğ’ğ® ğğšğ‡ğšğ”ğ§ ğ€ğ› ğ”ğ¬ ğŠğ ğ‹ğ¢ğ˜ğš ğ‰ğ¢ğ¬ğŠğ¨ ğŠğ¡ğ”ğğš ğğ ğŒğğ‘ğ ğğšğ¬ğ„ğ„ğ› ğŒğšğˆğ§ ğ‹ğ¢ğ¤ğ‡ğš ğ‡ğ¢ğğšğ‡ğ¢ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." , 
"â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğŠğ¢ğ“ğğš ğğ²ğšğšğ‘ğš ğ‡ğšğ¢ ğ–ğ¨ ğ’ğ¡ğ€ğªğ’ ğ‰ğ¨ ğŒğğ‘ğ¢ ğ‡ğšğ‘ ğ™ğ®ğğšğšğ ğğ ğ’ğ¡ğšğŒğ¢ğ‹ ğ‡ğšğ¢ ğ˜ğ ğŠğšğˆğ¬ğš ğˆğ¬ğ‡ğª ğŒğšğ¢ ğŒğğ‘ğš ğ‰ğ¨ ğ€ğğ‡ğ®ğ‘ğš ğ‡ğ¨ğŠğ ğğ¡ğ¢ ğŠğšğšğŒğ¢ğ¥ ğ‡ğšğ¢  ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." , 
"â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ“ğğ‘ğ¢ ğŠğšğšğŒğ˜ğšğğ¢ ğğšğ‘ ğ“ğšğ‘ğğğ… ğ“ğğ‘ğ¢ ğŠğ¨ğ’ğ‡ğ¢ğ’ğ¡ ğğ« ğ“ğšğšğğš ğ‡ğ¨ğ ğš ğ“ğğ‘ğ ğƒğ®ğ¤ğ‡ ğŒğ ğŠğ®ğ‚ğ¡ ğ‹ğ¨ğ† ğ“ğğ‘ğ ğ’ğ®ğŠğ¡ ğŒğ ğ™ğšğŒğšğšğğš ğ‡ğ¨ğ†ğš  ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­" ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğğšğš ğ‘ğšğ¬ğ“ğ¨ğ ğğ ğ’ğšğšğ“ğ¡ ğƒğ¢ğ˜ğš ğğš ğŒğšğ§ğ™ğ¢ğ¥ ğğ ğˆğ§ğ“ğğ™ğšğšğ‘ ğŠğ¢ğ˜ğš ğŒğğ¢ğ ğŠğ²ğ€ ğ¥ğ¢ğŠğ‡ğ® ğ€ğ©ğğ¢ ğ™ğ¢ğ§ğƒğšğ†ğ¢ ğğšğ‘ ğŒğğ‘ğ ğ’ğšğšğ“ğ¡ ğ“ğ¨ ğ”ğ¦ğğğƒğ¨ğ§ ğğ ğğ¡ğˆ ğŒğšğ™ğšğšğŠ ğŠğ¢ğ˜ğš ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğŠğšğˆğ¬ğš ğƒğ¢ğ¤ğ‡ğ“ğš ğ‡ğ® ğŠğšğˆğ’ğš ğ‹ğšğ†ğ“ğš ğ‡ğ® ğŠğ²ğ€ ğ…ğšğ‘ğª ğğšğ‘ğ“ğš ğ‡ğšğˆ ğ“ğğ‘ğ ğğšğƒ ğŠğ¢ğ’ğ¢ ğŠğ¨ ğ€ğšğœğ‡ğš ğ‹ğšğ ğğš ğğ¡ğˆ ğŒğ®ğ£ğ‡ğ ğ€ğšğœğ‡ğš ğğšğ‡ğ¢ ğ‹ğšğ ğ“ğš ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğğš ğ‰ğšğšğğ ğŠğ¢ğ’ ğ“ğšğ‘ğšğ‡ ğŠğš ğˆğ¬ğ‡ğª ğŠğšğ‘ ğ‘ğğ‡ğ ğ‡ğšğˆğ§ ğ‡ğ®ğŒ ğ‰ğ¢ğ’ğ¤ğ„ ğ‡ğ¨ ğğšğ‡ğ¢ ğ’ğšğŠğ­ğ„ ğ”ğ¬ ğ‡ğ¢ ğŠğ ğ‡ğ¢ ğŠğ ğ‡ğ¨ ğ‘ğğ¡ğ„ ğ‡ğšğˆ ğ‡ğ®ğŒ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ“ğğ‘ğ¢ ğ‚ğ¡ğšğ‡ğšğ“ ğŒğğ¢ğ ğ¢ğ“ğ§ğš ğ‚ğ¡ğšğ‡ğ§ğ„ ğ“ğ‡ğ¢ ğŠğ¢ ğğšğ¢ğ‘ ğŠğ¢ğ’ğ¢ ğ‚ğ¡ğšğ‡ğ§ğ„ ğŠğ¢ ğ‚ğ¡ğšğ‡ğšğ“ ğŠğ¢ ğ‚ğ¡ğšğ‡ğšğ“ ğğš ğ‘ğğ‡ğ¢ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ™ğ¢ğ§ğƒğšğ†ğ¢ ğŒğğ¢ğ§ ğ€ğ ğšğ‘ ğŠğ®ğœğ‡ ğğ®ğ‘ğš ğ‡ğ¨ ğ“ğ¨ğ‡ ğ’ğšğğšğ‘ ğ‘ğšğŠğ¡ğ ğŠğ²ğ”ğ§ğŠğ¢ ğ‘ğ¨ğ¨ ğŠğšğ‘ ğ…ğ¢ğ‘ ğ‡ğšğ’ğ§ğ„ ğŠğš ğŒğšğ™ğš ğ‡ğ¢ ğšğ¥ğ€ğ  ğ‡ğ¨ğ“ğš ğ‡ğšğ¢ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğˆğ¦ ğğ¨ğ“ ğğ¤ğšğ˜ ğŠğ²ğ®ğ ğŠğ¢ ğ€ğšğ©ğŠğ¢ ğ˜ğšğšğƒ ğ‘ğ®ğ‹ğšğ“ğ¢ ğ‡ğšğ¢ ğğšğ‡ğ¨ğ“ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." , 
"â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ“ğ®ğ£ğ‡ğ ğğšğ“ğš ğŠğ²ğ” ğğšğ‡ğ¢ ğ‚ğ¡ğšğ¥ğ“ğš ! ğ¤ğ¢ ğŒğğ‘ğ ğ“ğğ‘ğš ğğ¢ğğš ğƒğ¢ğ¥ ğğšğ‡ğ¢ ğ‹ğ ğ“a ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." , 
"â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ğ†ğ®ğ¬ğ¬ğ€ ğŠğ¢ğ“ğ§ğ€ ğğ¡ğ¢ ğ‡ğ¨ ğğ²ğšğšğ‘ ğ“ğ®ğŒ ğ‡ğ¢ ğ‡ğ¨ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğŒğ¢ğ‹ğ ğ“ğ¡ğ„ ğ„ğ¤ ğ€ğ‰ğ§ğšğğ¢ ğğšğ§ğŠğšğ‘ ğ€ğšğ£ ğŒğğ«ğ ğƒğ¢ğ¥ ğŠğ¢ ğ™ğšğ‘ğ¨ğ¨ğ‘ğšğ“ ğ‡ğ¨ ğ“ğ®ğŒ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­." ,
 "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ“ğğ‘ğš ğ’ğšğšğ“ğ¡ ğŸ™„ ğ“ğğ‘ğ¢ ğğšğšğ“ğğ¢ğ ğŸ¥° ğ“ğğ‘ğ¢ ğ‚ğšğ‘ğ ğŸ˜˜ ğ“ğğ‘ğ¢ ğ‘ğğ¬ğğğœğ“ ğŸ˜ ğ­ğğ‘ğš ğğ²ğšğ‘ ğŸ˜¶ ğğšğ¬ ğ˜ğšğ‡ğ¢ ğ‚ğ¡ğšğ‡ğ¢ğ˜ğ ğŒğ®ğ£ğ‡ğ ğŸ™ˆğŸ™ˆ ï¼¿ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­."
  "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğŒğ¢ğ‹ğ ğ“ğ¡ğ„ ğ„ğ¤ ğ€ğ‰ğ§ğšğğ¢...ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­.",
  "â¯â·¨Í¢âŸµÌ½Í‡ğŸ’—ê¯­âƒªâ·¯à¼†â‚ğ„„â˜â£ ã€ï¼¿ ğ“ğğ‘ğš ğ’ğšğšğ“ğ¡ ğŸ™„ ğ“ğğ‘ğ¢ ğğšğšğ“ğğ¢ğ ğŸ¥°...ã€‘ â¯áªµâ¯ê¯­Ì½ğ†¼ê¯­ğŸŒ¿ê¯­."
];

const imageLinks = [
"https://i.imgur.com/jHGiMXB.jpeg",
"https://i.imgur.com/SZuKQcV.jpeg",
"https://i.imgur.com/YbDFR4M.jpeg",
"https://i.imgur.com/xGlwWMl.jpeg",
"https://i.imgur.com/ir50pxR.jpeg",
"https://i.imgur.com/mqG4j4q.jpeg",
"https://i.imgur.com/tbyDsQo.jpeg",
"https://i.imgur.com/xciNKHb.jpeg",
"https://i.imgur.com/thVLlu3.jpeg",
"https://i.imgur.com/XyYETpZ.jpeg",
"https://i.imgur.com/8ppbD5V.jpeg",
];

const hindiDays = ["à¤°à¤µà¤¿à¤µà¤¾à¤°", "à¤¸à¥‹à¤®à¤µà¤¾à¤°", "à¤®à¤‚à¤—à¤²à¤µà¤¾à¤°", "à¤¬à¥à¤§à¤µà¤¾à¤°", "à¤—à¥à¤°à¥à¤µà¤¾à¤°", "à¤¶à¥à¤•à¥à¤°à¤µà¤¾à¤°", "à¤¶à¤¨à¤¿à¤µà¤¾à¤°"];
const hindiMonths = ["à¤œà¤¨à¤µà¤°à¥€", "à¤«à¤°à¤µà¤°à¥€", "à¤®à¤¾à¤°à¥à¤š", "à¤…à¤ªà¥à¤°à¥ˆà¤²", "à¤®à¤ˆ", "à¤œà¥‚à¤¨", "à¤œà¥à¤²à¤¾à¤ˆ", "à¤…à¤—à¤¸à¥à¤¤", "à¤¸à¤¿à¤¤à¤®à¥à¤¬à¤°", "à¤…à¤•à¥à¤Ÿà¥‚à¤¬à¤°", "à¤¨à¤µà¤®à¥à¤¬à¤°", "à¤¦à¤¿à¤¸à¤®à¥à¤¬à¤°"];

module.exports.config = {
  name: "autotime",
  version: "1.0.4",
  hasPermission: 2,
  credits: "Suheb Khan",
  description: "Auto time + shayari every hour in all groups",
  commandCategory: "â° Auto",
  usages: "autotime",
  cooldowns: 5
};

let isRunning = false;

module.exports.run = function({ api }) {
  if (isRunning) return;
  isRunning = true;

  const interval = 60 * 60 * 1000; // à¤¹à¤° 1 à¤˜à¤‚à¤Ÿà¥‡ à¤®à¥‡à¤‚

  setInterval(async () => {
    const now = moment().tz("Asia/Kolkata");
    const time = now.format("HH:mm");
    const date = `${now.date()}/${hindiMonths[now.month()]}/${now.year()}`;
    const day = hindiDays[now.day()];
    const shayari = shayariList[Math.floor(Math.random() * shayariList.length)];
    const imageUrl = imageLinks[Math.floor(Math.random() * imageLinks.length)];

    const message = `ââ”â”â”â”â”ã€ ğ—§ğ—œğ— ğ—˜ ã€‘â”â”â”â”â”â

ğ—§ğ—œğ— ğ—˜ âª ${time}
ğ——ğ—”ğ—§ğ—˜ âª ${date}
ğ——ğ—”ğ—¬ âª ${day}

ã€ŒğŸ“ ğ—¦ğ—›ğ—”ğ—¬ğ—”ğ—¥ğ—œ ã€
${shayari}

ââ”â”â”â”ã€ ğ’ğ”ğ‡ğ„ğ ğŠğ‡ğ€ğ ã€‘â”â”â”â”â`;

    const allThreads = global.data.allThreadID || [];

    for (const threadID of allThreads) {
      try {
        const res = await axios.get(imageUrl, { responseType: "stream" });
        api.sendMessage({ body: message, attachment: res.data }, threadID);
      } catch (err) {
        api.sendMessage(message + "\nâš ï¸ (à¤‡à¤®à¥‡à¤œ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥€)", threadID);
      }
    }
  }, interval);
};
